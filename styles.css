/* --- 1. PALETA DE VARIABLES GLOBALES (CON TU COLOR) --- */
:root {
  /* Tu color primario */
  --color-primario: #f57c00;
  --color-primario-hover: #e07000; /* Un naranja más oscuro para hover */
  --color-primario-foco: rgba(245, 124, 0, 0.25); /* Sombra de foco */

  /* Neutros para combinar */
  --color-fondo: #f8f8f8; /* Un gris muy claro y cálido */
  --color-superficie: #ffffff; /* Blanco para headers y controles */
  --color-texto: #333333; /* Texto principal */
  --color-texto-secundario: #555555;
  --color-borde: #dcdcdc; /* Un gris claro para bordes */

  /* Variables de UI */
  --radio-borde: 5px;
  --espacio-s: 8px;
  --espacio-m: 12px;
}

/* background-color: var(--color-primario); <-- Usando variable */

html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
/* #tree {
  width: 100%;
  height: 100%;
  background-color: #f8f8f8;
} */

#range_scale {
  width: 300px;
  position: absolute;
  bottom: 50px;
  left: 0;
  right: 0;
  margin: 0 auto;
}

#txt_scale {
  position: absolute;
  bottom: 70px;
  left: 50%;
  transform: translate(-50%, 0);
  color: var(--color-primario);
  font-size: 24px;
}

/* Mensajes de estado */
#status-message,
#error-message {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #fff;
  border: 1px solid #ccc;
  padding: 10px;
  z-index: 10;
  font-family: Arial, sans-serif;
  border-radius: 6px;
}
#error-message {
  background: #fdd;
  color: #a00;
  display: none;
}

/* --- AÑADE ESTO A TU STYLES.CSS --- */

/* Oculta los filtros y el botón de búsqueda por defecto */
#custom-filters {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

/* Clase para mostrarlos suavemente */
.ui-ready {
  visibility: visible !important;
  opacity: 1 !important;
}

/* Estilo base del nodo (de tu plantilla 'myTemplate') */
.boc-node.myTemplate .boc-rect {
  fill: #ffffff !important;
  stroke: #ccc !important;
  rx: 6 !important;
  ry: 6 !important;
}
.boc-node.myTemplate .boc-field-0 {
  font-size: 14px;
  font-weight: bold;
  fill: #333333;
}
.boc-node.myTemplate .boc-field-1 {
  font-size: 11px;
  fill: #555555;
}

/* Estilo Vacante (de tu plantilla 'vacanteTemplate') */
.boc-node.vacanteTemplate .boc-rect {
  fill: #fafafa !important;
  stroke: #dddddd !important;
  rx: 6 !important;
  ry: 6 !important;
  stroke-dasharray: 3 3 !important;
}
.boc-node.vacanteTemplate .boc-field-0 {
  font-size: 12px;
  font-style: italic;
  fill: #999999;
}

/* Colores por nivel jerárquico (de tu CSS) */
/* Usamos el tag 'level-X' para aplicar estos estilos */
.boc-node.level-1 .boc-rect {
  border-left: 5px solid #d32f2f;
}
.boc-node.level-2 .boc-rect {
  border-left: 5px solid #7b1fa2;
}
.boc-node.level-3 .boc-rect,
.boc-node.level-4 .boc-rect {
  border-left: 5px solid #1976d2;
}
.boc-node.level-5 .boc-rect {
  border-left: 5px solid #0288d1;
  background-color: #e3f2fd !important;
}
.boc-node.level-6 .boc-rect {
  border-left: 5px solid #388e3c;
  background-color: #e8f5e9 !important;
}
.boc-node.level-7 .boc-rect {
  border-left: 5px solid var(--color-primario);
  background-color: #fff3e0 !important;
}
.boc-node.level-99 .boc-rect {
  border-left: 5px solid #9e9e9e;
} /* Nivel no definido */

/* Estilo para líneas de subnivel (de tu CSS) */
path.link[data-l-id*="sub-level"] {
  stroke-dasharray: 3, 3;
  stroke: #888;
}

/* --- ESTILOS PARA EL EDIT FORM (DETAILS VIEW) --- */

/* Contenedor principal del formulario */
.boc-edit-form .boc-edit-form-header {
  background-color: #34495e; /* Nuevo color de fondo (ej: azul oscuro) */
  color: #ecf0f1; /* Nuevo color de texto principal (ej: gris claro) */
  /* ... (mantener border-radius, box-shadow, padding-top) ... */
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  padding-top: 20px;
}

/* Contenedor de la foto (sin cambios, borde blanco suele quedar bien) */
.boc-edit-form .boc-edit-form-photo {
  /* ... */
  border: 4px solid #ffffff;
}
/* En styles.css - Intenta ser más específico */
div.boc-node.level-5[data-n-id] {
  /* Añadir [data-n-id] aumenta especificidad */
  margin-bottom: -50px !important;
}

/* En styles.css */
div.boc-filter[data-filter] {
  left: 80px !important;
}

/*  Estilo para el botón de IA */
[data-boc-ai-button]:hover {
  background-color: var(--color-primario) !important;
} /* Nuevo color al pasar el mouse */

/*  Estilo para los botones flotantes */
[data-control-id]:hover {
  background-color: var(--color-primario) !important;
} /* Nuevo color al pasar el mouse */

[data-n-id] rect:hover {
  filter: drop-shadow(4px 5px 5px #aeaeae);
}
/*  Estilo para los botones de tamaño */
.btn {
  /* position: absolute; */
  top: 50px;
  z-index: 5000000;
  padding: 5px;
  font-size: large;
  border: none;
  float: right;
  margin: 5px;
  margin-top: 50px;
}

div.boc-node.level-6[data-n-id] {
  margin-bottom: -30px !important;
}
/* Campos de texto (Nombre, Puesto) */
.boc-edit-form .boc-edit-form-element {
  /* ... (mantener padding, text-align, etc.) ... */
  padding: 5px 20px;
  text-align: center;
  border: none;
  background: transparent;
}
.boc-edit-form .boc-edit-form-element > label {
  display: none;
}

/* Input del Nombre */
.boc-edit-form input[data-binding="nombre"] {
  /* ... (mantener font-size, weight, text-align, width, padding, background, border, box-shadow) ... */
  font-size: 18px;
  font-weight: bold;
  color: #ffffff; /* Color específico para el nombre (ej: blanco) */
  text-align: center;
  width: 100%;
  padding: 5px 0;
  background: transparent;
  border: none;
  box-shadow: none;
}
/* Input del Puesto */
.boc-edit-form input[data-binding="puesto"] {
  /* ... (mantener font-size, text-align, width, padding, background, border, box-shadow) ... */
  font-size: 14px;
  color: #bdc3c7; /* Color específico para el puesto (ej: gris azulado) */
  text-align: center;
  width: 100%;
  padding: 0 0 15px 0;
  margin-bottom: 15px;
  background: transparent;
  border: none;
  box-shadow: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Línea separadora más sutil */
}

/* Contenedor para los botones personalizados (sin cambios) */
.boc-edit-form .boc-edit-form-buttons {
  /* ... */
}

/* Estilo base para los botones personalizados */
.boc-edit-form button.details-button {
  background-color: #5dade2; /* Nuevo color de fondo del botón (ej: azul claro) */
  /* ... (mantener border, radius, size, cursor, display, etc.) ... */
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  padding: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  transition: background-color 0.2s;
}
.boc-edit-form button.details-button:hover {
  background-color: #85c1e9; /* Nuevo color al pasar el mouse */
}
.boc-edit-form button.details-button svg {
  fill: #ffffff; /* Asegurar que el icono sea blanco */
}

/* Ocultar botones inferiores por defecto (sin cambios) */
.boc-edit-form > .boc-edit-form-toolbar {
  display: none;
}

/* --- CAMBIOS EN EL FORMULARIO DE IA --- */
/* * 1. Apunta al input DENTRO del formulario AI 
 * cuando está enfocado (:focus)
*/
[data-boc-ai-form] .boc-input input:focus {
  border-color: #f57c00 !important; /* <-- Tu color naranja Liris */

  /* Opcional: sombra naranja sutil al hacer clic */
  box-shadow: 0 0 3px 1px rgba(245, 124, 0, 0.3) !important;
}

/* * 2. Asegura que el texto del label también sea naranja al hacer clic
*/
[data-boc-ai-form] .boc-input label.focused::after {
  color: #f57c00 !important; /* Mismo color naranja Liris */
}

/* * 3. Define el texto del label en estado normal
*/
[data-boc-ai-form] .boc-input label {
  font-size: 0 !important;
  color: transparent !important;
}
[data-boc-ai-form] .boc-input label::after {
  content: "Pregúntale a LIRIS AI" !important;
  font-size: 16px !important;
  color: #acacac !important;
}

/* LOGO Y MENSAJE AI */
/* 1. Regla para tu imagen de logo (de la respuesta anterior) */
[data-boc-ai-messages] img {
  content: url("Logo-Liris.png") !important; /* Reemplaza esto */
  width: 40px !important;
  height: 40px !important;
  object-fit: contain;
  margin-right: 8px; /* Añade un espacio entre el logo y el texto */
}

/* 2. Asegúrate de que el span se comporte bien (opcional) */
[data-boc-ai-messages] span {
  display: inline-block; /* Asegura que el span sea un bloque para alinear */
}
/* ---------------------------------------- */

/* --- ESTILOS DE LA BARRA DE CONTROLES --- */

#controles {
  background-color: var(--color-superficie);
  padding: var(--espacio-m) 20px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--espacio-m);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid #eee;
}

/* Estilos para Selects */
.control-select {
  /*font-family: inherit;  Hereda la fuente del body */
  font-size: 14px;
  padding: var(--espacio-s) var(--espacio-m);
  border: 1px solid var(--color-borde);
  border-radius: var(--radio-borde);
  background-color: #fff;
  color: var(--color-texto-secundario);
  min-width: 180px; /* Un buen tamaño base */

  /* Transición suave para el foco */
  transition: border-color 0.2s, box-shadow 0.2s;

  /* Apariencia (para un mejor look & feel) */
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23555' viewBox='0 0 16 16'%3E%3Cpath d='M8 10.75a.5.5 0 0 1-.354-.146l-3-3a.5.5 0 0 1 .708-.708L8 9.293l2.646-2.647a.5.5 0 0 1 .708.708l-3 3A.5.5 0 0 1 8 10.75z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--espacio-m) center;
  padding-right: 35px; /* Espacio extra para la flecha */
}

/* Efecto :focus (CON TU NARANJA) */
.control-select:focus {
  outline: none;
  border-color: var(--color-primario); /* Borde naranja al seleccionar */
  box-shadow: 0 0 0 3px var(--color-primario-foco); /* Sombra naranja */
}
/* ////////////////////////////////////////////////////// */

/* --- ESTILOS PARA LA BARRA DE FILTROS --- */

#custom-filters div {
  display: flex;
  flex-wrap: wrap;
  gap: 8px; /* ¡ESPACIO! (Esto separa cada filtro) */
  justify-content: center;
}

/* --- ESTILOS PARA SELECT2 (Look "classic" simple) --- */

.select2-container {
  width: 240px !important;
  min-width: 180px;
}

/* Forzar un look más plano y simple, sin gradientes */
.select2-container--classic .select2-selection--single {
  background-color: #fefefe;
  border: 1px solid #aaa;
  border-radius: 4px;
  height: 38px !important;
  padding: 4px 0;
  background-image: none; /* Sin gradiente */
  box-shadow: none; /* Sin sombra */
}

/* Borde de foco naranja (tu color) */
.select2-container--classic.select2-container--open .select2-selection--single {
  border-color: var(--color-primario);
  box-shadow: 0 0 0 3px var(--color-primario-foco); /* Tu sombra de foco */
}

.select2-container--classic
  .select2-selection--single
  .select2-selection__arrow {
  height: 36px !important;
}

/* Estilo del dropdown */
.select2-container--classic.select2-container--open .select2-dropdown {
  border-color: var(--color-primario);
}

/* --- INICIO: AJUSTES DE LAYOUT RESPONSIVE (Versión 4 - Unidades REM) --- */

/* 1. Contenedor Principal (Flexbox) */
.org-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background-color: #f8f8f8;
}

/* 2. Header de Filtros (Fijo) */
#custom-filters {
  flex-shrink: 0;
  background-color: #ffffff;
  padding: 12px 15px;
  border-bottom: 1px solid #ddd;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  z-index: 10;
}

/* 3. Contenedor del Gráfico (Flexible) */
/* #tree-container {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
} */

/* 1. Prepara el contenedor del gráfico */
#tree-container {
  /* Necesario para que el overlay se posicione correctamente */
  flex-grow: 1;
  position: relative;
  /* Dale una altura mínima para que el spinner se vea 
       incluso si el div #tree está vacío */
  min-height: 400px;
}

/* 2. El overlay de carga */
#chart-loader-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* Usamos un blanco semi-transparente o sólido. 
       Prueba #ffffff si prefieres que sea opaco. */
  background: rgba(255, 255, 255, 0.9);
  z-index: 10;

  /* Para centrar el spinner y el texto */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  /* Oculto por defecto */
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease, visibility 0.3s;
}

/* 3. Clase para mostrar el overlay */
#chart-loader-overlay.visible {
  visibility: visible;
  opacity: 1;
}

/* 4. El spinner (animación de rotación) */
.loader-spinner {
  border: 5px solid #f3f3f3; /* Borde gris claro */
  border-top: 5px solid #f57c00; /* Tu color Naranja */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

/* 5. El texto debajo del spinner */
#loader-text {
  font-family: Arial, sans-serif;
  color: #555;
  font-size: 16px;
  font-weight: bold;
}

/* 6. Animación del spinner */
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* 4. Div del Gráfico (100% de su nuevo padre) */
#tree {
  width: 100%;
  height: 100%;
  position: relative; /* ¡CLAVE! Ancla los controles 'absolute' de Balkan */
}

/* 5. Mensajes de Estado (Como Overlays) */
#status-message,
#error-message {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.75);
  color: white;
  padding: 20px 30px;
  border-radius: 8px;
  z-index: 1000;
  font-size: 1.2em;
  font-family: Arial, sans-serif;
  display: none;
}

#error-message {
  background: #d32f2f;
}

/* 6. (NUEVO) Forzar tamaño de botones de control (Derecha) */
.boc-controls > div[data-control-id] {
  /* Un tamaño base escalable (aprox. 40px) */
  width: 2.5rem !important;
  height: 2.5rem !important;
  /* Un padding escalable (aprox. 8px) */
  padding: 0.5rem !important;
  box-sizing: border-box !important;
}

/* 7. (NUEVO) Forzar tamaño del SVG dentro de los botones */
.boc-controls > div[data-control-id] > svg {
  width: 100% !important;
  height: 100% !important;
}

/* --- FIN: AJUSTES DE LAYAYOUT --- */

/* --- INICIO: CAMBIAR COLOR BOTÓN ENVIAR AI --- */

.boc-ai-send.boc-ai-send-cansend {
  background-color: var(
    --color-primario
  ) !important; /* Fondo sutil al hacer hover */
}

.boc-ai-send.boc-ai-send-cansend svg path {
  stroke: #ffffff !important;
}

.boc-ai-send.boc-ai-send-cansend:hover {
  background-color: var(
    --color-primario-hover
  ) !important; /* Fondo sutil al hacer hover */
}
/* --- FIN: CAMBIAR COLOR BOTÓN ENVIAR AI --- */

/* PASO 2: EL CSS 
  EDIT FORM
*/

/* El fondo oscuro que cubre todo */
#details-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 9998;

  /* Centrado con Flexbox */
  display: none; /* Se activa con JS */
  justify-content: center;
  align-items: center;
}

/* La tarjeta modal */
#custom-details-form {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 18px rgba(0, 0, 0, 0.15);
  width: 90%;
  max-width: 600px; /* Ancho como pediste */
  padding: 24px;
  text-align: center;
  font-family: Arial, sans-serif;

  /* Animación de entrada */
  transform: scale(0.95);
  opacity: 0;
  transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}

/* Estilo para cuando el modal está activo */
#details-overlay.visible {
  display: flex;
}
#details-overlay.visible #custom-details-form {
  transform: scale(1);
  opacity: 1;
}

/* --- Contenido del Modal --- */
#details-img {
  display: block; /* La hacemos un bloque */
  margin-left: auto; /* Centrado automático */
  margin-right: auto; /* Centrado automático */

  width: 110px;
  height: 110px;
  border-radius: 50%;
  border: 2px solid #eee;
  margin-bottom: 16px;
  object-fit: cover; /* Asegura que la imagen no se deforme */
}

#details-name {
  font-size: 22px;
  font-weight: bold;
  text-transform: uppercase;
  color: #333;
  margin: 0;
}

#details-puesto {
  font-size: 18px;
  text-transform: uppercase;
  color: #555;
  margin-top: 4px;
  margin-bottom: 20px;
}

/* Bloque de info (Email, Depto, etc.) */
.details-info-block {
  text-align: left;
  max-width: 440px; /* Centra el bloque de texto */
  margin: 0 auto 24px auto;
}

.details-info-line {
  display: flex;
  font-size: 15px;
  color: #333;
  margin-bottom: 8px;
  line-height: 1.4;
}

.details-info-label {
  font-weight: bold;
  width: 130px; /* Ancho fijo para alinear los valores */
  flex-shrink: 0;
  color: #111;
}

.details-info-value {
  word-break: break-all; /* Evita que emails largos rompan el layout */
}

/* Contenedor de botones de manuales */
.details-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  flex-wrap: wrap; /* Se apilan en móviles */
  margin-bottom: 24px;
}

/* Estilo base de TODOS los botones */
.details-btn {
  width: 180px;
  height: 46px;
  border: none;
  border-radius: 8px;
  color: white;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.2s ease, opacity 0.2s;
}

.details-btn:hover {
  opacity: 0.85;
}

/* Colores específicos de los botones */
.btn-morado {
  background-color: #6f42c1;
} /* Morado (ajustado de #8A2BE2) */
.btn-azul {
  background-color: #0d6efd;
}
.btn-verde {
  background-color: #28a745;
}
.btn-rojo {
  background-color: #dc3545;
}

/* Ocultar botones de manuales por defecto (se mostrarán con JS si hay data) */
#btn-manual-funciones,
#btn-manual-procedimientos,
#btn-manual-usuario {
  /* display: none; */
}

/* Estilos para la lista de empleados en el modal (Modo Cargo) */
.details-employee-list {
  text-align: left;
  max-height: 150px; /* Altura máxima, por si hay muchos empleados */
  overflow-y: auto; /* Scroll si es necesario */
  border-top: 1px solid #eee;
  margin-top: 10px;
  padding-top: 10px;
}

.employee-list-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.employee-list-item:hover {
  background-color: #f0f0f0; /* Un gris claro para el hover */
}

.employee-list-img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 10px;
  object-fit: cover;
  flex-shrink: 0;
}

.employee-list-info {
  font-size: 14px;
}

.employee-list-name {
  font-weight: bold;
  color: #333;
}

.employee-list-email {
  font-size: 12px;
  color: #777;
}

/* Oculta la imagen principal del modal por defecto */
#custom-details-form #details-img {
  display: none;
}

/* --- CSS para Ocultar/Mostrar el Buscador --- */

/* 1. Ocultar el buscador (que Balkan crea) por defecto */
div.boc-search {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transition: opacity 0.3s ease 0s;
}

/* 2. Clase para mostrar el buscador cuando hacemos clic */
div.boc-search.is-visible {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;

  /* ¡AJUSTE AQUÍ! Lo movemos más a la derecha */
  /* Icono (70px) + Ancho icono (40px) + Espacio (10px) = 120px */
  right: 120px !important;
  top: 20px !important;
}

/* 3. Estilo para NUESTRO icono (el que crearemos con JS) */
#custom-search-icon {
  position: absolute;
  top: 20px;
  /* Lo dejamos en 70px (al lado del menú de 3 rayas que está en 20px) */
  right: 70px;

  /* Estilos de botón */
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 50%;
  cursor: pointer;
  /* z-index: 1001; */
  transition: background-color 0.2s;

  margin-top: 9px;
  box-sizing: border-box;
}

/* Estilo del SVG (la lupa) dentro de nuestro botón */
#custom-search-icon svg {
  width: 20px;
  height: 20px;
  stroke: #555;
  stroke-width: 2;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

#custom-search-icon:hover {
  background-color: #f5f5f5;
}

/* 3. (OPCIONAL) Ajuste visual del icono de la lupa */
div[data-ctrl-search] {
  top: 20px !important;
  right: 70px !important;
}

.search-item-hovered rect {
  fill: var(--color-primario);
}

/* Contenedor principal del select */
.select2-container--default .select2-selection--single {
  background-color: #f8f9fa !important;
  border: 1px solid #ced4da !important;
  border-radius: 6px !important;
  height: 38px !important;
  display: flex !important;
  align-items: center !important;
  transition: all 0.2s ease-in-out !important;
}

/* Sombra azul y borde más marcado al pasar el mouse o enfocar */
.select2-container--default .select2-selection--single:hover,
.select2-container--default.select2-container--open .select2-selection--single {
  border-color: var(--color-primario) !important;
  box-shadow: 0 0 0 1px var(--color-primario-hover) !important;
}

/* Texto dentro del select */
.select2-container--default .select2-selection__rendered {
  color: #495057 !important;
  font-size: 0.95rem !important;
  line-height: 38px !important;
  padding-left: 10px !important;
}

/* Flecha del dropdown */
.select2-container--default .select2-selection__arrow {
  height: 38px !important;
  right: 8px !important;
  top: 0 !important;
}

/* Estilo del menú desplegable */
.select2-container--default .select2-results > .select2-results__options {
  max-height: 180px !important;
  overflow-y: auto !important;
  font-size: 0.95rem !important;
}

/* Opción resaltada */
.select2-container--default .select2-results__option--highlighted {
  background-color: var(--color-primario) !important;
  color: #fff !important;
}

/* Asegura el ancho correcto */
.select2-container {
  width: 220px !important;
}

/*
 * =========================================
 * ESTILOS PARA LA LISTA DEL BUSCADOR (CON SCROLL)
 * =========================================
 */

/* * 1. Apunta al contenedor de la tabla de resultados.
 * El !important es necesario para ganar la batalla de especificidad
 * contra los estilos que la librería aplica dinámicamente.
*/
.boc-search > div:last-child {
  /* * Altura de 5 items. 
     * Asumimos 50px por item (40px de alto + 10px de padding/margen).
     * Puedes ajustar este valor si tus items son más altos o bajos.
     */
  max-height: 250px !important;
  overflow-y: auto !important; /* ¡Añade el scroll vertical! */

  /* (Opcional) Estilos para que se vea bien el contenedor con scroll */
  border-radius: 4px;
  border: 1px solid #ddd;
}

/* (Opcional) Asegurar que los items tengan una altura fija */
.boc-search-result table tr {
  height: 50px;
}

/* --- Estilos para el Multi-select de Nivel con Checkboxes --- */

/* Oculta el checkbox nativo que Select2 intenta mostrar en la lista */
.select2-results__option .select2-selection__choice__remove {
  display: none !important;
}

/* Contenedor para nuestro checkbox falso y el texto */
.select2-results__option[aria-selected] {
  display: flex;
  align-items: center;
  -webkit-user-select: none; /* Evita seleccionar el texto al hacer clic */
  user-select: none;
}

/* Estilo para nuestro checkbox falso */
.select2-results__option[aria-selected] input {
  margin-right: 8px;
  vertical-align: middle;
  margin-top: -2px; /* Ajuste visual fino */
  pointer-events: none; /* Hace que el clic vaya al 'label' (el span) */
}

/* Oculta el 'x' para quitar items individuales en la caja (queremos "limpiar todo") */
.select2-selection--multiple .select2-selection__choice__remove {
  display: none !important;
}

/* Estilo de la caja principal cuando está seleccionada */
.select2-selection--multiple .select2-selection__choice {
  background-color: #f0f0f0 !important;
  border: 1px solid #ddd !important;
  color: #555;
  padding: 3px 8px !important;
}

/* Cuando el select está deshabilitado, oculta el 'x' de limpiar todo */
.select2-container--disabled .select2-selection__clear {
  display: none;
}
.select2-container .select2-selection__clear {
  display: none;
}

/* --- Estilos para el Multi-select de Nivel con Checkboxes --- */
/* 1. Ocultar las píldoras (tags) como antes */
.select2-selection--multiple .select2-selection__choice {
  display: none !important;
}

/* 2. Estilo del contenedor PRINCIPAL del Multi-select */
.select2-container .select2-selection--multiple {
  /* Forzamos la altura exacta de los otros inputs (38px) */
  min-height: 38px !important;
  height: 38px !important;

  /* Alineación y bordes idénticos a los .control-select */
  display: flex !important;
  align-items: center !important; /* Centrado vertical perfecto */
  border: 1px solid #ced4da !important;
  border-radius: 6px !important;
  background-color: #f8f9fa !important;
  padding: 0 0 0 10px !important; /* Padding izquierdo para alinear el texto */
}

/* 3. Ajuste del campo de texto/placeholder interno */
.select2-container .select2-search--inline .select2-search__field {
  width: 100% !important;
  margin-top: 0 !important; /* Eliminamos el margen que causaba el desfase */
  padding: 0 !important;
  height: 36px !important; /* Altura interna */
  line-height: 36px !important;
  font-size: 0.95rem !important; /* Tamaño de fuente igual a los demás */
  color: #495057 !important;
  background: transparent !important;
}

/* 4. Ocultar el placeholder fantasma */
.select2-search__field:placeholder-shown + .select2-selection__placeholder {
  display: none;
}

/* 5. Efecto Focus (Borde naranja) para el Multi-select */
.select2-container--focus .select2-selection--multiple {
  border-color: var(--color-primario) !important;
  box-shadow: 0 0 0 1px var(--color-primario-hover) !important;
}

/* --- ESTILOS PARA SELECT2 DESHABILITADO (VISUALMENTE BLOQUEADO) --- */

/* 1. Estilo para Single Select Deshabilitado */
.select2-container--default.select2-container--disabled
  .select2-selection--single {
  background-color: #e9ecef !important; /* Gris oscuro visible */
  cursor: not-allowed !important; /* Cursor de prohibido */
  border-color: #ced4da !important;
  opacity: 0.7 !important; /* Efecto desvanecido */
  box-shadow: none !important;
}

/* Cambiar color del texto interno en Single */
.select2-container--default.select2-container--disabled
  .select2-selection__rendered {
  color: #6c757d !important; /* Texto grisáceo */
}

/* 2. Estilo para Multi Select Deshabilitado (Tu filtro de Niveles) */
.select2-container--default.select2-container--disabled
  .select2-selection--multiple {
  background-color: #e9ecef !important; /* Gris oscuro visible */
  cursor: not-allowed !important;
  border-color: #ced4da !important;
  opacity: 0.7 !important;
  box-shadow: none !important;
}

/* Asegurar que el input de búsqueda interno también parezca deshabilitado */
.select2-container--default.select2-container--disabled .select2-search__field {
  background-color: transparent !important;
  cursor: not-allowed !important;
  color: #6c757d !important; /* Placeholder grisáceo */
}

#select2-nivel-select-container.select2-selection__rendered {
  display: none;
}

.select2-selection.select2-selection--multiple.select2-selection--clearable {
  padding-left: 0px !important;
}

/* ==========================================================================
   DISEÑO RESPONSIVE COMPACTO (SOLUCIÓN FINAL)
   Reemplaza todo lo anterior relacionado con @media
   ========================================================================== */

/* --- TIER 1: TABLETS Y MOVILES NORMALES (Menos de 768px) --- */
@media (max-width: 768px) {
  /* 1. LIMPIEZA DEL CONTENEDOR PRINCIPAL */
  #custom-filters {
    width: 100% !important;
    padding: 8px 0 !important;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  /* 2. LA ESTRUCTURA (GRILLA CENTRADA) */
  #custom-filters > div {
    /* Ancho del 92% asegura un margen del 4% a cada lado. IMPOSIBLE que toque bordes. */
    width: 92% !important;
    margin: 0 auto !important;

    display: grid;
    grid-template-columns: 1fr 1fr; /* Dos columnas exactas */
    gap: 8px !important; /* Espacio entre cajitas */
  }

  /* 3. DOMAR LOS SELECTS (ESTILO COMPACTO) */
  .select2-container {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Cajas más delgadas y letra ajustada */
  .select2-container .select2-selection--single,
  .select2-container .select2-selection--multiple {
    height: 34px !important; /* Antes 38-40px, ahora más fino */
    min-height: 34px !important;
    font-size: 11px !important; /* Letra reducida para que quepa más texto */
    border-radius: 4px !important;
    border: 1px solid #ccc !important;
  }

  /* Ajuste del texto dentro de la caja */
  .select2-container--default .select2-selection__rendered {
    line-height: 32px !important; /* Centrado vertical */
    padding-left: 6px !important;
    padding-right: 18px !important; /* Espacio para no chocar con la flecha */
    color: #444 !important;
    letter-spacing: -0.3px; /* Un pequeño truco para que quepan más letras */
  }

  /* Flecha más discreta */
  .select2-container--default .select2-selection__arrow {
    height: 32px !important;
    width: 18px !important;
    right: 1px !important;
  }

  /* 4. EL BOTÓN "TODOS LOS NIVELES" */
  #custom-filters div > button,
  #custom-filters div > .btn {
    grid-column: 1 / -1; /* Ocupa todo el ancho */
    width: 100% !important;
    height: 34px !important; /* Misma altura que los selects */
    font-size: 11px !important;
    margin-top: 0 !important;
    text-transform: uppercase; /* Hace que se vea más ordenado */
  }

  /* 5. LAYOUT GENERAL */
  html,
  body,
  .org-container {
    height: 100% !important;
    margin: 0 !important;
    overflow: hidden !important;
  }

  #tree-container {
    flex-grow: 1;
    width: 100%;
    height: auto !important;
  }

  /* 6. CONTROLES FLOTANTES (ABAJO) */
  .boc-controls {
    transform: scale(0.75); /* Un poco más pequeños */
    transform-origin: bottom right;
    bottom: 15px !important;
    right: 10px !important;
  }

  /* --- 7. BÚSQUEDA COMPACTA Y A LA IZQUIERDA --- */

  /* El contenedor de la búsqueda */
  div.boc-search {
    /* 1. TAMAÑO: Restringimos el ancho */
    width: 60% !important; /* Ocupa un poco más de la mitad */
    max-width: 220px !important; /* Tope máximo para que no se estire demasiado */
    min-width: 140px !important; /* Mínimo para que se pueda escribir */

    /* 2. POSICIÓN: Anclada a la IZQUIERDA */
    left: 15px !important; /* Margen izquierdo de seguridad */
    right: auto !important; /* ¡Clave! Le decimos que NO se pegue a la derecha */

    /* Ajuste vertical: Puede que necesites subirlo o bajarlo un poco */
    /* top: 60px !important; <--- Descomenta y ajusta si choca con los filtros */

    display: flex !important;
    align-items: center !important;
    z-index: 900; /* Aseguramos que esté por encima del gráfico pero debajo de modales */
  }

  /* El campo de texto (Input) por dentro */
  div.boc-search input {
    width: 100% !important;
    height: 32px !important; /* Altura acorde a tus botones select */
    font-size: 11px !important; /* Texto compacto */
    padding-left: 8px !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    background-color: rgba(
      255,
      255,
      255,
      0.95
    ) !important; /* Fondo casi blanco */
  }

  /* El icono de la lupa (ajuste visual) */
  div.boc-search svg {
    width: 14px !important;
    height: 14px !important;
    right: 5px !important; /* Lo pegamos un poco a la derecha DENTRO del input */
    margin: 0 !important;
  }
}

/* --- TIER 2: MÓVILES ESTRECHOS (iPhone SE, Fold, etc - Menos de 380px) --- */
@media (max-width: 380px) {
  /* Reducimos aún más para pantallas muy finas */
  .select2-container .select2-selection--single,
  .select2-container .select2-selection--multiple {
    height: 30px !important; /* Súper compacto */
    font-size: 10px !important; /* Letra pequeña pero legible */
  }

  .select2-container--default .select2-selection__rendered {
    line-height: 28px !important;
  }

  .select2-container--default .select2-selection__arrow {
    height: 28px !important;
  }

  #custom-filters div > button,
  #custom-filters div > .btn {
    height: 30px !important;
    font-size: 10px !important;
  }

  /* Reducimos el gap para que no se vea separado */
  #custom-filters > div {
    gap: 5px !important;
    width: 96% !important; /* Aprovechamos un poco más del ancho */
  }
}
